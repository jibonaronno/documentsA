<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>WSL Setup</title>
    <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <!-- BEGIN syntax highlighter -->
    <script type="text/javascript" src="sh/shCore.js"></script>
    <script type="text/javascript" src="sh/shBrushJScript.js"></script>
    <link type="text/css" rel="stylesheet" href="sh/shCore.css"/>
    <link type="text/css" rel="stylesheet" href="sh/shThemeDefault.css"/>
    <link href="https://fonts.googleapis.com/css?family=Gruppo" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <script type="text/javascript">
      SyntaxHighlighter.all();
    </script>
    <!-- END syntax highlighter -->

    <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="linuxsetup.css">
  </head>
  <body>
  
<div style="padding: 20px;font-size: 24px; line-height: 40px">
<div class="title_b">Setting UP WSL</div>

<!-- SHOW HIDE START 001  -->

<style type="text/css">
div[id=div-001] {
  display: none;
}
  input[id=toggle-001]:checked ~ div[id=div-001] {
    display: block;
    }
</style>

<h2><label for="toggle-001">Primary Links & Terms</label></h2>
<input type="checkbox" id="toggle-001" style="display: none;">

<div id="div-001">
Update Ubuntu Packages List : <code>sudo apt update</code> <br>
Install openssh-server : <code>sudo apt get openssh-server</code> <br>
<a href="https://stackoverflow.com/questions/61002681/connecting-to-wsl2-server-via-local-network/63781351#63781351">Stack Overflow Link Command</a> <br>
<pp>Port Forwarding Command</pp> <br>
<code>netsh interface portproxy add v4tov4 listenport=22 listenaddress=0.0.0.0 connectport=22 connectaddress=172.19.133.120</code> <br> <br>
Add firewall rule from windows defender. <br>
<img src="img/img001.jpg" width="60%" alt="NO IMAGE FOUND"> <br> <br>

Analisys code for knowledge from https://stackoverflow.com/questions/49835559/access-a-web-server-which-is-running-on-wsl-windows-subsystem-for-linux-from-t <br>
<br>
<pre>
$remoteport = bash.exe -c "ifconfig eth0 | grep 'inet '"
$found = $remoteport -match '\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}';

if( $found ){
  $remoteport = $matches[0];
} else{
  echo "The Script Exited, the ip address of WSL 2 cannot be found";
  exit;
}

#[Ports]

#All the ports you want to forward separated by coma
$ports=@(80,443,10000,3000,5000);


#[Static ip]
#You can change the addr to your ip config to listen to a specific address
$addr='0.0.0.0';
$ports_a = $ports -join ",";


#Remove Firewall Exception Rules
iex "Remove-NetFireWallRule -DisplayName 'WSL 2 Firewall Unlock' ";

#adding Exception Rules for inbound and outbound Rules
iex "New-NetFireWallRule -DisplayName 'WSL 2 Firewall Unlock' -Direction Outbound -LocalPort $ports_a -Action Allow -Protocol TCP";
iex "New-NetFireWallRule -DisplayName 'WSL 2 Firewall Unlock' -Direction Inbound -LocalPort $ports_a -Action Allow -Protocol TCP";

for( $i = 0; $i -lt $ports.length; $i++ ){
  $port = $ports[$i];
  iex "netsh interface portproxy delete v4tov4 listenport=$port listenaddress=$addr";
  iex "netsh interface portproxy add v4tov4 listenport=$port listenaddress=$addr connectport=$port connectaddress=$remoteport";
}
</pre>

</div>
<!-- SHOW HIDE END 001  -->


  <!-- SHOW HIDE START 006  -->
  <style type="text/css">
    div[id=div-006] {
      display: none;
    }
      input[id=toggle-006]:checked ~ div[id=div-006] {
        display: block;
        }
    </style>
    
    <h2><label for="toggle-006">Blank</label></h2>
    <input type="checkbox" id="toggle-006" style="display: none;">
    
    <div id="div-006">
      
      
    </div>

  <!-- SHOW HIDE END 006  -->

  <!-- SHOW HIDE START 007  -->
  <style type="text/css">
    div[id=div-007] {
      display: none;
    }
      input[id=toggle-007]:checked ~ div[id=div-007] {
        display: block;
        }
    </style>
    
    <h2><label for="toggle-007">Random Links Commands</label></h2>
    <input type="checkbox" id="toggle-007" style="display: none;">
    
    <div id="div-007">
     

    </div>
  <!-- SHOW HIDE END 007  -->

<!-- SHOW HIDE START 008  -->
<style type="text/css">
  div[id=div-008] {
    display: none;
  }
    input[id=toggle-008]:checked ~ div[id=div-008] {
      display: block;
      }
  </style>
  
  <h2><label for="toggle-008">Blank</p3> </label></h2>
  <input type="checkbox" id="toggle-008" style="display: none;">
  
  <div id="div-008">
  </div>
<!-- SHOW HIDE END 008  -->

<!-- SHOW HIDE START 009  -->
<style type="text/css">
  div[id=div-009] {
    display: none;
  }
    input[id=toggle-009]:checked ~ div[id=div-009] {
      display: block;
      }
  </style>
  
  <h2><label for="toggle-009">Blank </label></h2>
  <input type="checkbox" id="toggle-009" style="display: none;">
  
  <div id="div-009">
      

  </div>
<!-- SHOW HIDE END 009  -->

<!-- SHOW HIDE START 010  -->
<style type="text/css">
  div[id=div-010] {
    display: none;
  }
    input[id=toggle-010]:checked ~ div[id=div-010] {
      display: block;
      }
  </style>
  
  <h2><label for="toggle-010"> Blank </label></h2>
  <input type="checkbox" id="toggle-010" style="display: none;">
  
  <div id="div-010">
    
  </div>
<!-- SHOW HIDE START 010  -->

<!--   -->

</div>

<!--
<pre class="brush:js;">
</pre><br /><br />
-->  
</body>
</html>
